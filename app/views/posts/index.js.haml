$("#{j render(@posts)}").appendTo($("#masonry"));

var container = document.querySelector('#masonry');
var msnry = new Masonry(container, {
columnWidth: '.post',
itemSelector: '.post',
isAnimated: !Modernizr.csstransitions
});

imagesLoaded(container, function () {
msnry = new Masonry(container);
});

- if @posts.last_page?
  $('.pagination').remove();
  $('#masonry').append("<p class=\"pagination\">#{I18n.t('posts.no_more_posts')}</p>");
- else
  $('.pagination').remove();
  $('#masonry').append("<ul class=\"pagination pager\"><li>#{j link_to_next_page(@posts, 'More posts', remote: true, params: { category: params[:category] })}</li></p>");